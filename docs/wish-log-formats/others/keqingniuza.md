# 其他工具 - 刻记牛杂店

!> 该工具已停止维护

刻记牛杂店为一款PC端的本地祈愿导出工具。

其具有祈愿记录可视化、米游社签到、任务提醒等功能。

当前该工具已停止维护，最后版本为`v2.3.2`。开发者建议用户迁移至[寻空](wish-log-formats/others/xunkong.md "其他工具 - 寻空")。

其开源项目地址为[xunkong/KeqingNiuza](https://github.com/xunkong/KeqingNiuza) 。

## 导入

刻记牛杂店提供了Excel文件（传统祈愿导出格式）、Excel文件（通用祈愿格式）、JSON文件（通用祈愿格式）三种导入选项。

### 通用祈愿格式

该工具支持从通用祈愿格式文件导入，详情请见[通用祈愿格式 - 支持现状 - 刻记牛杂店](wish-log-formats/universal-format/support-status.md#刻记牛杂店 "通用祈愿格式 - 支持现状 - 刻记牛杂店")。

### 传统祈愿导出格式

该工具支持从扩展祈愿项ID的传统祈愿导出格式文件导入，向前兼容无祈愿项ID的传统祈愿导出格式文件。

其要求具有“新手祈愿”、“常驻祈愿”、“角色活动祈愿”、“武器活动祈愿”四大祈愿类型的祈愿表，且名称必须吻合，顺序不做要求。

| 表名 | 对应官方名称   | 对应`gacha_type` |
| ------------------ | ---------------------------- | ---------------- |
| 角色活动祈愿       | 角色活动祈愿与角色活动祈愿-2 | `301` / `400`    |
|武器活动祈愿|武器活动祈愿|`302`|
|常驻祈愿|常驻祈愿|`200`|
|新手祈愿|新手祈愿|`100`|

祈愿表的列A至列D、及列G为以下祈愿项字段，表头命名不做要求：

| 列 | 表头（简体中文时） | 对应祈愿项字段 | 格式与备注 |
| -- | ------------------ | ---------- | ---- |
|A| 时间 | `time` | `yyyy-MM-dd HH:mm:ss`。祈愿项原始时间，不进行时区本地转换。 |
|B|名称|`name`|官方名称|
|C|物品类型|`item_type`|官方名称|
|D|星级|`rank_type`|数字，`3`/ `4` / `5`|
|G|祈愿 Id|`id`|该祈愿项的ID。占用传统祈愿格式的G列（备注列）。**允许缺失**。|

若祈愿项ID缺失，则刻记牛杂店将使用从`1000000000000000001`起的补全生成值进行自动补全。

!> 若分多次导入不同时期的缺失ID的祈愿项，刻记牛杂店将会出现补全编号错乱的问题。

## 导出

该工具支持导出通用祈愿格式文件，详情请见[通用祈愿格式 - 支持现状 - 刻记牛杂店](wish-log-formats/universal-format/support-status.md#刻记牛杂店 "通用祈愿格式 - 支持现状 - 刻记牛杂店")。

## 储存格式

刻记牛杂店采用基于JSON格式的刻记牛杂店储存格式保存其祈愿记录信息。 

其根对象为一个列表，按照升序储存用户的祈愿记录项。

在较新版本的刻记牛杂店储存格式中，其祈愿记录项包含从米哈游API返回的祈愿记录项中的所有字段，并额外注入了`uigf_gacha_type`字段。

因而，其祈愿项与[通用祈愿格式的祈愿项](wish-log-formats/universal-format/json.md#祈愿记录项 )等价（包括含`uid`与`lang`两个非标准字段在内的所有字段），其根对象与通用祈愿格式中的`list`对象等价。

